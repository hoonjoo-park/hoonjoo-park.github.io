<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>실행 컨텍스트 (Excution Context) - Hoon&#039;s 블로그</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#3273dc"><meta name="application-name" content="Hoon"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="msapplication-TileColor" content="#3273dc"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Hoon"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="실행 컨텍스트란? 실행컨텍스트는 “실행 가능한 코드가 실행되기 위해 필요한 환경”을 의미한다."><meta property="og:type" content="blog"><meta property="og:title" content="실행 컨텍스트 (Excution Context)"><meta property="og:url" content="https://hoonjoo-park.github.io/javascript/base/ExcutionContext/"><meta property="og:site_name" content="Hoon&#039;s 블로그"><meta property="og:description" content="실행 컨텍스트란? 실행컨텍스트는 “실행 가능한 코드가 실행되기 위해 필요한 환경”을 의미한다."><meta property="og:locale" content="en_US"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162585746-5d5be72b-d161-412a-8608-c9f0ded915e5.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162585717-8cd2be5f-56fa-48c6-8320-6e6c54947a8d.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162585721-dfc27bcd-c07c-442c-a98c-c0804283939b.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162586332-84d6c87d-cc92-4464-9aff-3279f574ff7b.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162585727-483283fb-4955-4906-94f4-5d6bc000c746.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162585729-25c89a33-43db-4cc1-ba0c-9819a785cfbd.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162585730-1ad68d8a-c476-4ad3-85e2-460cba49ad34.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162586364-17ae9cc8-0054-4793-a82c-fbb440e0bcc5.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162585733-6b49e543-8b2d-42b7-bec4-0a606d9c0235.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162585734-17e1df3e-d5f7-49d8-b55f-9799e797f008.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162585735-8b1979b1-afbe-4ca9-8102-816684b33484.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162585736-49f66ae2-c3d6-4e94-a125-f7d744ef193a.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162585737-1326f794-544a-4c11-86f6-bfdd085865b7.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162585739-6b66a578-0bae-42f2-a905-01aa5da27633.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162585740-2c98d9b9-6f3b-4b7e-94f2-c5e530f1b05c.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162585741-dd76d213-1a04-428b-bddb-e0734861a3ce.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162585743-fbb09b12-3435-4d0f-a06e-2ba4b510e1ce.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162585744-1aacea8a-d51f-4df8-a8c2-1ca4dbddebe0.png"><meta property="og:image" content="https://user-images.githubusercontent.com/67448481/162585745-f942e9f2-7713-46fd-b7f5-ca3b47c6499e.png"><meta property="article:published_time" content="2022-04-09T17:58:40.000Z"><meta property="article:modified_time" content="2022-04-12T11:18:39.610Z"><meta property="article:author" content="Hoonjoo"><meta property="article:tag" content="개념"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://user-images.githubusercontent.com/67448481/162585746-5d5be72b-d161-412a-8608-c9f0ded915e5.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hoonjoo-park.github.io/javascript/base/ExcutionContext/"},"headline":"실행 컨텍스트 (Excution Context)","image":["https://user-images.githubusercontent.com/67448481/162585746-5d5be72b-d161-412a-8608-c9f0ded915e5.png","https://user-images.githubusercontent.com/67448481/162585717-8cd2be5f-56fa-48c6-8320-6e6c54947a8d.png","https://user-images.githubusercontent.com/67448481/162585721-dfc27bcd-c07c-442c-a98c-c0804283939b.png","https://user-images.githubusercontent.com/67448481/162586332-84d6c87d-cc92-4464-9aff-3279f574ff7b.png","https://user-images.githubusercontent.com/67448481/162585727-483283fb-4955-4906-94f4-5d6bc000c746.png","https://user-images.githubusercontent.com/67448481/162585729-25c89a33-43db-4cc1-ba0c-9819a785cfbd.png","https://user-images.githubusercontent.com/67448481/162585730-1ad68d8a-c476-4ad3-85e2-460cba49ad34.png","https://user-images.githubusercontent.com/67448481/162586364-17ae9cc8-0054-4793-a82c-fbb440e0bcc5.png","https://user-images.githubusercontent.com/67448481/162585733-6b49e543-8b2d-42b7-bec4-0a606d9c0235.png","https://user-images.githubusercontent.com/67448481/162585734-17e1df3e-d5f7-49d8-b55f-9799e797f008.png","https://user-images.githubusercontent.com/67448481/162585735-8b1979b1-afbe-4ca9-8102-816684b33484.png","https://user-images.githubusercontent.com/67448481/162585736-49f66ae2-c3d6-4e94-a125-f7d744ef193a.png","https://user-images.githubusercontent.com/67448481/162585737-1326f794-544a-4c11-86f6-bfdd085865b7.png","https://user-images.githubusercontent.com/67448481/162585739-6b66a578-0bae-42f2-a905-01aa5da27633.png","https://user-images.githubusercontent.com/67448481/162585740-2c98d9b9-6f3b-4b7e-94f2-c5e530f1b05c.png","https://user-images.githubusercontent.com/67448481/162585741-dd76d213-1a04-428b-bddb-e0734861a3ce.png","https://user-images.githubusercontent.com/67448481/162585743-fbb09b12-3435-4d0f-a06e-2ba4b510e1ce.png","https://user-images.githubusercontent.com/67448481/162585744-1aacea8a-d51f-4df8-a8c2-1ca4dbddebe0.png","https://user-images.githubusercontent.com/67448481/162585745-f942e9f2-7713-46fd-b7f5-ca3b47c6499e.png"],"datePublished":"2022-04-09T17:58:40.000Z","dateModified":"2022-04-12T11:18:39.610Z","author":{"@type":"Person","name":"Hoonjoo"},"publisher":{"@type":"Organization","name":"Hoon's 블로그","logo":{"@type":"ImageObject","url":"https://hoonjoo-park.github.io/img/logo.svg"}},"description":"실행 컨텍스트란? 실행컨텍스트는 “실행 가능한 코드가 실행되기 위해 필요한 환경”을 의미한다."}</script><link rel="canonical" href="https://hoonjoo-park.github.io/javascript/base/ExcutionContext/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&amp;family=Roboto" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&amp;family=Roboto" rel="stylesheet"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-0RF6Y2B0CN" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-0RF6Y2B0CN');</script><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="Hoon&#039;s 블로그" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-04-09T17:58:40.000Z" title="2022. 4. 10. 오전 2:58:40">2022-04-10</time></span><span class="level-item"><a class="link-muted" href="/categories/%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C/">프론트엔드</a><span> / </span><a class="link-muted" href="/categories/%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C/Javascript/">Javascript</a></span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>&nbsp;visits</span></div></div><h1 class="title is-3 is-size-4-mobile">실행 컨텍스트 (Excution Context)</h1><div class="content"><p><img src="https://user-images.githubusercontent.com/67448481/162585746-5d5be72b-d161-412a-8608-c9f0ded915e5.png"></p>
<h2 id="실행-컨텍스트란"><a href="#실행-컨텍스트란" class="headerlink" title="실행 컨텍스트란?"></a>실행 컨텍스트란?</h2><blockquote>
<p>실행컨텍스트는 “<strong>실행 가능한 코드가 실행되기 위해 필요한 환경</strong>”을 의미한다.</p>
</blockquote>
<p><em>“실행 가능한 코드?”</em>, <em>“실행되기 위해 필요한 환경?”</em> 의미가 직관적으로 와닿지 않을 수도 있다. 따라서 조금 더 쉽게 풀어 쓰자면, 그냥 <strong>자바스크립트에서 코드가 실행되는 원리와 과정을 담은 객체이자 개념</strong>이라고 이해해도 무방하다.</p>
<p>실행컨텍스트를 확실하게 학습해야 this, 호이스팅, 클로저, 스코프 등, 자바스크립트에서 코드가 어떻게 관리되고 실행되는지를 명확하게 이해할 수 있다. 따라서 이번 기회에 실행 컨텍스트를 확실하게 학습하고 넘어갈 수 있도록 해보자!</p>
<hr>
<h2 id="실행-가능한-코드"><a href="#실행-가능한-코드" class="headerlink" title="실행 가능한 코드"></a>실행 가능한 코드</h2><blockquote>
<p>위에서 실행 컨텍스트를 “실행 가능한 코드가 실행되기 위해 필요한 환경”이라고 정의했다.<br>그렇다면 여기서 <strong>실행 가능한 코드란</strong> 무엇을 의미하는 걸까?</p>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/67448481/162585717-8cd2be5f-56fa-48c6-8320-6e6c54947a8d.png"></p>
<p>먼저 결론부터 말하자면, 실행 가능한 코드에는 <strong>전역 코드, 함수 코드, eval코드, 모듈 코드</strong>가 있다. 하지만 <code>eval</code>함수는 보안상의 이유로 거의 사용되지 않기 때문에, 이번 포스팅에서 <strong>실행 가능한 코드 = 전역 코드, 함수 코드</strong>라고 이해하면 편할 것이다.</p>
<table>
<thead>
<tr>
<th>코드</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td>전역코드</td>
<td>전역에 작성되어 있는 코드를 의미한다. 함수나 클래스 내부 코드는 포함하지 않는다.</td>
</tr>
<tr>
<td>함수코드</td>
<td>함수 내부에 작성되어 있는 코드를 의미한다. 하지만, 내부 함수 또는 내부 클래스의 내부 코드는 포함하지 않는다.</td>
</tr>
<tr>
<td>모듈코드</td>
<td>하나의 독립적인 파일에 작성된 코드라고 생각하면 된다. 보통 모듈화된 코드는 import를 통해 불러와서 사용한다.</td>
</tr>
</tbody></table>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> moduleCode <span class="keyword">from</span> <span class="string">&#x27;../constants&#x27;</span>; <span class="comment">// 모듈 코드 (이처럼 모듈화된 코드를 모듈 코드라 한다)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> year = <span class="number">2022</span>; <span class="comment">// 전역 코드</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 전역 코드 (선언문 까지는 전역코드에 속한다)</span></span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">&#x27;hoon&#x27;</span>; <span class="comment">// 함수 내부에 있는 코드는 함수 코드다.</span></span><br><span class="line">  <span class="built_in">console</span>.log(name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="실행-컨텍스트의-개괄적-형태와-동작-방식"><a href="#실행-컨텍스트의-개괄적-형태와-동작-방식" class="headerlink" title="실행 컨텍스트의 개괄적 형태와 동작 방식"></a>실행 컨텍스트의 개괄적 형태와 동작 방식</h2><blockquote>
<p>코드가 실행되기 위한 환경에 대해 다루기에 앞서, 실행 컨텍스트가 어떤 형태를 띄는지와 어떻게 실행되는지에 대해 먼저 짚고 넘어가도록 하자.</p>
</blockquote>
<p>결론부터 얘기하자면, 실행 컨텍스트는 <strong>코드 실행을 위해 필요한 정보들을 저장해둔 객체</strong>다. 그리고 이 실행 컨텍스트는 스택(stack)으로써 동작한다.</p>
<p><img src="https://user-images.githubusercontent.com/67448481/162585721-dfc27bcd-c07c-442c-a98c-c0804283939b.png"></p>
<p>위 사진과 같이, 실행 컨텍스트는 크게 <strong>변수객체, 스코프 체인, this값을 프로퍼티로써 저장하여 관리</strong>한다. 정말 러프하게 이를 코드로 표현한다면 아래와 같이 표현할 수 있을 것이다.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> 실행컨텍스트 = &#123;</span><br><span class="line">	변수객체 : &#123;<span class="comment">/* 변수, 매개변수, 함수 선언, 인자(arguments) */</span>&#125;,</span><br><span class="line">	스코프 체인: [],</span><br><span class="line">	<span class="built_in">this</span>값 : &#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>그리고 아래에서 더 자세히 설명하겠지만, 코드의 종류에 따라 생성되는 실행 컨텍스트의 종류도 각각 다르다. <strong>전역 코드는 전역 실행 컨텍스트를, 함수는 함수 실행 컨텍스트를 생성한다.</strong> 또한, <strong>언제나 전역 실행 컨텍스트가 먼저 생성</strong>되어 <code>stack</code>에 쌓인다.</p>
<blockquote>
<p><code>stack</code>이란 아래에서 위로 쌓이는 자료구조로, 나중에 들어온 코드가 먼저 실행되는 LIFO(후입선출) 방식의 매커니즘을 따른다.</p>
</blockquote>
<p>이에 따라, 아래와 같은 코드의 실행 컨텍스트 스택 동작 방식은 그림과 같다.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> year = <span class="number">2022</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  bar();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo();</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/67448481/162586332-84d6c87d-cc92-4464-9aff-3279f574ff7b.png"></p>
<p>위 사진과 같이, 전역 실행 컨텍스트가 먼저 생성되어 <code>stack</code>에 담기고, 순차적으로 이후의 함수 실행 컨텍스트들이 쌓인다. 그리고 LIFO(후입선출법) 방식에 따라 마지막에 쌓인 실행 컨텍스트 순으로 코드가 실행된다.(실행이 완료된 코드의 실행 컨텍스트는 실행 완료 이후 소멸된다)</p>
<hr>
<h2 id="코드의-평가-amp-실행"><a href="#코드의-평가-amp-실행" class="headerlink" title="코드의 평가 &amp; 실행"></a>코드의 평가 &amp; 실행</h2><blockquote>
<p>위에서 언급한 ‘실행 가능한 코드’들은 모두 실행 컨텍스트를 생성한다.<br>그리고 상술했듯, <strong>코드의 종류에 따라 생성되는 컨텍스트의 종류 또한 각각 차이</strong>가 있다.</p>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/67448481/162585727-483283fb-4955-4906-94f4-5d6bc000c746.png"></p>
<p>먼저, 자바스크립트 엔진이 코드를 실행하는 과정은 “<strong>코드의 평가 → 코드의 실행”</strong>의 순서를 따른다.</p>
<h3 id="코드-평가"><a href="#코드-평가" class="headerlink" title="코드 평가"></a>코드 평가</h3><blockquote>
<p>이 단계에서 <strong>실행 컨텍스트를 생성</strong>한다.</p>
</blockquote>
<p><strong>평가 단계에서는 변수와 함수의 선언문 만을 전담하여 실행</strong>한다. 그리고 이들을 <code>key</code>로써 실행 컨텍스트가 관리하는 스코프에 등록하는 것이다.</p>
<p>그리고 주의해야 할 점은, 평가 단계에서는 변수 또는 함수 선언문의 값들을 <code>undefined</code>로 초기화 한다는 것이다.(<code>let</code>, <code>const</code>, 함수 표현식은 예외)</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> year;</span><br><span class="line">year = <span class="number">2022</span>;</span><br></pre></td></tr></table></figure>

<p>위의 예시를 통해 설명하자면, 코드 평가 과정에서는 <code>year</code>를 <code>undefined</code>로 실행컨텍스트에 저장해 둔다. (선언문만 실행)</p>
<p><img src="https://user-images.githubusercontent.com/67448481/162585729-25c89a33-43db-4cc1-ba0c-9819a785cfbd.png"></p>
<h3 id="코드-실행"><a href="#코드-실행" class="headerlink" title="코드 실행"></a>코드 실행</h3><blockquote>
<p>위와 같은 코드 평가 과정이 끝나면, 바로 <strong>코드를 실행</strong>한다.</p>
</blockquote>
<p>코드 평가 과정에서 선언문에 대한 실행을 마쳤으므로, <strong>코드 실행 과정에서는 선언문을 제외한 코드들이 실행</strong>된다. 즉, 소스코드 실행 단계에서는 호출문, 할당문 등이 실행된다고 생각하면 된다.</p>
<p>따라서, 위의 코드에서는 <code>year = 2022;</code> 만 실행하면 되는데, 여기서 할당문을 무작정 실행하는 것은 아니다. 변수 할당문을 실행하기 전에, <strong>자바스크립트 엔진은 해당 변수가 선언된 변수인지 우선적으로 체크</strong>한다. 이 체크(검색) 과정은 선언문 코드를 다시 실행하는 방식이 아니라, <strong>실행컨텍스트가 관리하는 스코프에 체크하고자 하는 변수</strong> <code>year</code><strong>가 등록되어 있는지 확인하는 방식</strong>을 따른다. 이에 따라, 위에서 <code>year</code>는 <code>undefined</code>로 초기화 한 상태이기 때문에 정상적으로 할당문이 실행되어 값 <code>2022</code>가 할당된다.</p>
<p><img src="https://user-images.githubusercontent.com/67448481/162585730-1ad68d8a-c476-4ad3-85e2-460cba49ad34.png"></p>
<blockquote>
<p>즉, 위와 같이 <code>2022</code>라는 값이 실행 컨텍스트에 저장되는 것이다.</p>
</blockquote>
<hr>
<h2 id="중간-정리"><a href="#중간-정리" class="headerlink" title="중간 정리"></a>중간 정리</h2><blockquote>
<p>지금까지 실행컨텍스트가 코드 실행을 위한 정보들을 저장하고 관리하는 하나의 객체라는 것, 그리고 코드를 실행할 때 스택 자료구조로써 평가→실행의 과정을 따른다는 점을 학습했다.</p>
</blockquote>
<p>현재까지 학습한 내용들을 토대로, 아래의 코드가 실행 컨텍스트로써 어떻게 실행되는지 확인하며 중간 정리를 해보도록 하자.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;hoon&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> gender = <span class="string">&#x27;male&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCountry</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> country = <span class="string">&#x27;Korea&#x27;</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(name + <span class="string">&#x27;is from&#x27;</span> + country);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getCountry();</span><br></pre></td></tr></table></figure>

<blockquote>
<p>위의 코드의 <code>stack</code> 동작 구조는 이하와 같을 것이다. (전역 실행 컨텍스트 → 함수 실행 컨텍스트 순)</p>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/67448481/162586364-17ae9cc8-0054-4793-a82c-fbb440e0bcc5.png"></p>
<p>가장 먼저 전역 객체가 생성된 후, 전역 실행 컨텍스트가 스택에 먼저 쌓인다. 즉, <strong>전역 코드가 먼저 실행된다</strong>는 것이다. 위 코드에서 전역 코드는 전역에서의 모든 선언문을 의미한다. 따라서 우선적으로 <strong>전역코드의 코드 평가</strong>가 먼저 이루어진다.</p>
<h3 id="전역-코드의-평가-→-실행"><a href="#전역-코드의-평가-→-실행" class="headerlink" title="전역 코드의 평가 → 실행"></a>전역 코드의 평가 → 실행</h3><p><code>name</code>, <code>gender</code>, <code>getCountry</code>가 전역 실행 컨텍스트에 초기화되어 저장된다. 그리고 평가가 끝나면 바로 코드들이 실행되는데, 코드 순서에 따라 <code>name</code>과 <code>gender</code>에 값이 할당되고 → <code>getCountry()</code>가 호출된다.</p>
<h3 id="함수-코드의-평가-→-실행"><a href="#함수-코드의-평가-→-실행" class="headerlink" title="함수 코드의 평가 → 실행"></a>함수 코드의 평가 → 실행</h3><blockquote>
<p>위에서 <code>getCountry</code> 함수가 호출됐기 때문에, 전역 실행 컨텍스트 위에 <code>getCountry</code> 함수 실행 컨텍스트가 쌓인다.</p>
</blockquote>
<p>이에 따라, <code>getCountry</code>함수 내에 작성된 코드들이 평가 → 실행되는 과정이 여기서도 동작한다. 우선, 위와 동일하게 함수 내에 선언된 변수가 평가되어 <code>country</code>라는 변수가 초기화 되어 실행 컨텍스트에 저장된다. 여기서 주의할 점은, 여기서의 실행 컨텍스트는 전역 실행 컨텍스트가 아닌 <code>getCountry</code>만의 <strong>함수 실행 컨텍스트</strong>라는 것이다. 즉, <code>country</code> 변수는 함수 실행 컨텍스트에 초기화 되어 등록된다.</p>
<p>이제 함수 코드의 평가가 끝나면 코드가 실행된다. 코드 실행에 따라 <code>country</code> 변수에는 ‘Korea’라는 값이 할당되고, <code>console.log()</code>가 호출될 것이다. 물론 <code>console.log()</code>도 하나의 메소드이자 함수이므로 또 다른 함수 실행 컨텍스트를 생성하지만 여기서는 생략하도록 하겠다.</p>
<p>그러면 <code>getCountry</code> 함수의 실행이 끝났으므로 해당 함수 실행 컨텍스트는 소멸되고 스택에서도 제거된다(<code>pop</code>). 그리고 이후 전역 실행 컨텍스트까지 소멸 후 스택에서 제거되며 모든 코드의 실행이 종료된다.</p>
<blockquote>
<p>이처럼, 모든 코드의 실행은 실행 컨텍스트를 통해 이루어진다.<br>실행 컨텍스트에 <strong>식별자와 스코프가 저장</strong>되고, stack 자료구조의 매커니즘에 따라 각 코드들이 호출 및 실행된다.</p>
</blockquote>
<p>여기까지가 실행 컨텍스트의 개괄적인 흐름이었다고 치면, 아래부터는 <strong>실행 컨텍스트에 어떻게 식별자와 스코프가 저장되고 관리되는지</strong> “<strong>렉시컬 환경</strong>”이라는 개념을 통해 학습할 것이다. 복잡해보이고 어려워보이는 단어들이 등장할 예정이지만, 알고 보면 그렇게 어려운 내용은 아니기에, 천천히 잘 따라오기만 하면 될 것이다.</p>
<hr>
<h2 id="렉시컬-환경"><a href="#렉시컬-환경" class="headerlink" title="렉시컬 환경"></a>렉시컬 환경</h2><blockquote>
<p>렉시컬 환경은 실행 컨텍스트의 원리를 이해하는 데 굉장히 중요한 부분이다.<br>이는 하나의 <strong>자료구조로써, 식별자와 그 값, 그리고 스코프를 관리</strong>한다.</p>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/67448481/162585733-6b49e543-8b2d-42b7-bec4-0a606d9c0235.png"></p>
<p>렉시컬은 사전적으로 “어휘”를 의미한다. 따라서 렉시컬 환경이라 함은, <strong>어휘적 환경</strong>이라고 할 수 있는데, 어느정도 일리가 있는 말이다. 식별자와 스코프는 결국 어휘, 언어, 또는 이름과 관련된 개념들로써, 이는 렉시컬이라는 의미에 포섭될 수 있는 개념이라고 볼 수 있기 때문이다.</p>
<h3 id="렉시컬-환경의-구성요소"><a href="#렉시컬-환경의-구성요소" class="headerlink" title="렉시컬 환경의 구성요소"></a>렉시컬 환경의 구성요소</h3><blockquote>
<p>그렇다면 렉시컬 환경이 정확하게 무엇일까?</p>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/67448481/162585734-17e1df3e-d5f7-49d8-b55f-9799e797f008.png"></p>
<p>렉시컬 환경은 실행 컨텍스트의 구성요소 중 하나다. 원래는 렉시컬 환경 내에 <code>LexicalEnvironment</code>와 <code>VariableEnvironment</code>라는 컴포넌트가 각각 존재하지만, 이번 포스팅에서는 이 두 컴포넌트를 “렉시컬 환경”이라고 통칭하도록 하겠다.</p>
<p><img src="https://user-images.githubusercontent.com/67448481/162585735-8b1979b1-afbe-4ca9-8102-816684b33484.png"></p>
<p>이 렉시컬 환경이라는 것은 <strong>“환경 레코드”</strong>와 “<strong>외부 렉시컬 환경에 대한 참조</strong>“라는 컴포넌트로 구성되어 있다. <strong>환경 레코드는 스코프 내에서의 식별자를 등록하고, 식별자에 바인딩 된 값(value)을 관리</strong>한다. 그리고 <strong>“외부 렉시컬 환경에 대한 참조”는 상위 스코프와의 체이닝(연결)의 주축</strong>이다. 이 컴포넌트는 상위 스코프(상위 코드의 렉시컬 환경)를 가리킨다.</p>
<blockquote>
<p>말이 어렵게 느껴질 수 있지만, 이 두 컴포넌트는 확실하게 짚고 넘어가야 하는 부분이기에 그림을 통해 조금 더 자세히 설명해보도록 하겠다.</p>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/67448481/162585736-49f66ae2-c3d6-4e94-a125-f7d744ef193a.png"></p>
<p>위의 그림처럼, <strong>렉시켤 환경 내에서 환경 레코드는 변수명과 같은 식별자와 그 값을 등록하고 저장</strong>해둔다. 그리고 <strong>“외부 렉시컬 환경에 대한 참조”는 상위 스코프를 가리키는데, 이는 상위 렉시컬 환경을 의미</strong>한다.(만약 현재 실행 컨텍스트가 전역 실행 컨텍스트라면 현재의 렉시컬 환경이 최상위일 것이기에 상위 스코프는 어떠한 것도 참조하지 못한다)</p>
<hr>
<h2 id="실행-컨텍스트의-동작-과정-Feat-렉시컬-환경"><a href="#실행-컨텍스트의-동작-과정-Feat-렉시컬-환경" class="headerlink" title="실행 컨텍스트의 동작 과정 (Feat. 렉시컬 환경)"></a>실행 컨텍스트의 동작 과정 (Feat. 렉시컬 환경)</h2><blockquote>
<p>이제 마지막으로, 실행 컨텍스트가 정확하게 어떻게 동작하는지 예제 코드와 함께 살펴보도록 하자.</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">3</span>;</span><br><span class="line">  <span class="keyword">const</span> b = <span class="number">4</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">num2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> c = <span class="number">5</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(a + b + c + num + num2);</span><br><span class="line">  &#125;</span><br><span class="line">  bar(<span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(<span class="number">100</span>);</span><br></pre></td></tr></table></figure>

<p>코드만 먼저 봤을 때는, 왜 <code>var</code>와 <code>const</code>를 혼용해서 썼는지 의문이 먼저 들 수 있지만, 이는 아래에서 자연스럽게 설명될 부분이니 잠시 궁금증을 내려놓아도 된다.</p>
<blockquote>
<p>이제 위의 예제 코드가 실행 컨텍스트에 의해 어떻게 실행되는지 차근차근 짚고 넘어가볼 것이다.</p>
</blockquote>
<hr>
<h2 id="전역-객체-생성-→-전역-코드-평가-및-실행"><a href="#전역-객체-생성-→-전역-코드-평가-및-실행" class="headerlink" title="전역 객체 생성 → 전역 코드 평가 및 실행"></a>전역 객체 생성 → 전역 코드 평가 및 실행</h2><blockquote>
<p>가장 먼저 실행되는 코드는 전역 코드이므로, 전역 객체 생성, 그리고 전역 코드 평가 및 실행 단계가 우선적으로 진행된다.</p>
</blockquote>
<h3 id="전역-객체를-생성"><a href="#전역-객체를-생성" class="headerlink" title="전역 객체를 생성"></a>전역 객체를 생성</h3><p>우선, <strong>모든 코드가 로드되기 전에 전역 객체가 생성된다</strong>. 이 전역 객체 안에는 자바스크립트 내장 전역 함수와 프로퍼티, 객체 등으로 구성된다. 쉽게 말하면, <strong>자바스크립트의 기본적 전역 객체 구성요소들이 구성되는 것</strong>이라고 생각하면 된다.</p>
<p>이제 코드가 로드되고 전역 객체가 생성되면, 위에서 학습했던 바와 같이 전역 코드의 평가가 시작된다. 직전에는 코드 평가 및 실행의 개략적 플로우 정도만 간단히 살펴봤다면, 이번에는 정확히 어떤 곳에 어떤 정보들이 담기고 활용되는지 세부적으로 학습해보도록 하자.(렉시컬 환경)</p>
<blockquote>
<p>큰 틀에서의 <strong>전역 코드에 대한 평가 및 실행 과정</strong>은 이하의 사진과 같다.</p>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/67448481/162585737-1326f794-544a-4c11-86f6-bfdd085865b7.png"></p>
<h3 id="전역-실행-컨텍스트의-생성"><a href="#전역-실행-컨텍스트의-생성" class="headerlink" title="전역 실행 컨텍스트의 생성"></a>전역 실행 컨텍스트의 생성</h3><blockquote>
<p>먼저, 전역 실행 컨텍스트가 생성된다.</p>
</blockquote>
<p>그리고 바로 <strong>전역 렉시컬 환경이 생성</strong>되는데, 상술했듯 이 전역 렉시컬 환경에는 <strong>“전역 환경 레코드”</strong>와 <strong>“외부 렉시컬 환경에 대한 참조”</strong> 컴포넌트가 구성된다. 바로 아래에서 살펴보도록 하자.</p>
<h3 id="전역-렉시컬-환경을-생성"><a href="#전역-렉시컬-환경을-생성" class="headerlink" title="전역 렉시컬 환경을 생성"></a>전역 렉시컬 환경을 생성</h3><blockquote>
<p>그 중에서도 먼저 전역 환경 레코드를 먼저 생성한다.</p>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/67448481/162585739-6b66a578-0bae-42f2-a905-01aa5da27633.png"></p>
<p>위의 사진과 같이, 전역 환경 레코드는 특별하게도 두 개의 레코드로 구성된다. ES6 이전에는 <code>var</code>만 존재했지만, <code>let</code>과 <code>const</code>가 등장하며 <code>var</code>과 <code>let</code>&amp;<code>const</code>가 저장되는 레코드가 이원화 되었다. 이에 따라, <code>var</code> 전역 변수와 전역에서 선언된 함수는 “<strong>객체 환경 레코드</strong>“ 컴포넌트에 저장되고, <code>const</code>와 <code>let</code> 전역 변수는 “<strong>선언적 환경 레코드</strong>” 컴포넌트에 저장된다.</p>
<h3 id="객체-환경-레코드-생성"><a href="#객체-환경-레코드-생성" class="headerlink" title="객체 환경 레코드 생성"></a>객체 환경 레코드 생성</h3><blockquote>
<p>객체 환경 레코드에서의 핵심은,<br>객체 환경 레코드가 <code>BindingObject</code>라는 객체와 연결된다는 것이다.</p>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/67448481/162585740-2c98d9b9-6f3b-4b7e-94f2-c5e530f1b05c.png"></p>
<p>객체 환경 레코드에 저장된 <code>var</code> 전역 변수와 전역 함수는 이 <code>BindingObject</code>를 통해 <strong>전역 객체의 프로퍼티와 메소드가 된다</strong>. 즉, 이 변수와 함수들은 <code>window.OOO</code>을 통해 호출할 수 있게 된다는 것이다. (객체 환경 레코드가 보유하는 <code>BindingObject</code>는 전역 객체를 가리킨다. 따라서 이 <code>BindingObject</code>를 통해 전역 객체와 연결되어 객체 환경 레코드에 해당하는 전역 변수와 전역 함수가 전역 객체에 등록될 수 있는 것이다.)</p>
<p>따라서 예제코드에서 <code>var</code>로 선언한 전역변수 <code>a</code>와 함수 선언문에 의한 전역 함수 <code>foo</code>는 <code>BindingObject</code>에 의해 전역 객체에 등록된다 (위 사진 참고).</p>
<p>그리고, 전역 변수는 위의 사진과 같이 <code>undefined</code>로 초기화 되지만, 함수 선언문으로 정의된 전역 함수 <code>foo</code>는 평가 직후 전역 객체에 함수 객체로써 즉시 할당된다. 이 때문에 함수 선언문으로 정의된 전역 함수는 선언문 이전에 호출될 수 있는 것이다.</p>
<blockquote>
<p>다시, 함수 선언문으로 정의된 전역 함수는 <code>BindingObject</code>에 의해 전역 객체에 평가 직후 즉시 할당된다. 이 때문에 우리는 함수 선언문 이전에 함수를 호출할 수 있는 것이다!</p>
</blockquote>
<h3 id="선언적-환경-레코드-생성"><a href="#선언적-환경-레코드-생성" class="headerlink" title="선언적 환경 레코드 생성"></a>선언적 환경 레코드 생성</h3><blockquote>
<p><code>let</code>과 <code>const</code>로 선언된 변수가 여기에 저장된다. (<code>let</code>과 <code>const</code>로 표현된 함수도 포함)</p>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/67448481/162585741-dd76d213-1a04-428b-bddb-e0734861a3ce.png"></p>
<p>위의 예제 코드에서 <code>const</code>로 <code>b</code>를 선언했기 때문에 <code>b</code>가 이 선언적 환경 레코드에 등록될 것이다. 하지만 이전 포스팅에서 다뤘듯, <code>let</code>과 <code>const</code>는 <strong>선언과 초기화의 과정이 분리되어 이루어지기 때문에 런타임이 해당 선언문에 도달하기 전 까지는 초기화가 되지 않는다.</strong> (TDZ가 발생하는 이유가 바로 이 것!)</p>
<p>여기서 런타임이란, 코드의 실행을 의미한다. 따라서 코드 평가 과정에서는 이 변수들이 초기화 되지 않아 메모리 공간이 확보되지 않는다는 것이다.</p>
<h3 id="this-바인딩"><a href="#this-바인딩" class="headerlink" title="this 바인딩"></a>this 바인딩</h3><blockquote>
<p>전역 환경 레코드의 마지막 구성요소다.<br>전역 환경 레코드 내에는 객체 환경 레코드와 선언적 환경 레코드 외에, <strong>[[GlobalThisValue]]</strong> 라는 내부 슬롯이 존재한다.</p>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/67448481/162585743-fbb09b12-3435-4d0f-a06e-2ba4b510e1ce.png"></p>
<p>이 <strong>[[GlobalThisValue]]</strong> 내부 슬롯에 <code>this</code>가 바인딩 된다. 현재는 전역 코드에 대한 실행 컨텍스트를 다루고 있기에 당연히 현재는 전역 객체가 <code>this</code>에 바인딩 될 것이다(<code>window</code>).</p>
<h3 id="외부-렉시컬-환경에-대한-참조-결정"><a href="#외부-렉시컬-환경에-대한-참조-결정" class="headerlink" title="외부 렉시컬 환경에 대한 참조 결정"></a>외부 렉시컬 환경에 대한 참조 결정</h3><p>마지막으로 상위 스코프를 가리키는 “외부 렉시컬 환경에 대한 참조”를 결정한다. 하지만 현재 실행 컨텍스트는 전역 실행 컨텍스트이므로, 상위 스코프가 존재하지 않는다. 이에 따라 전역 렉시컬 환경에서의 “외부 렉시컬 환경에 대한 참조” 값은 <code>null</code>이다.</p>
<h3 id="코드-실행-1"><a href="#코드-실행-1" class="headerlink" title="코드 실행"></a>코드 실행</h3><blockquote>
<p>이제 모든 코드에 대한 평가가 끝났으므로 선언문 이외의 코드들이 실행된다.</p>
</blockquote>
<p><code>a</code>와 <code>b</code>에는 각각 1과 2가 할당될 것이다. 그리고 <code>foo</code> 함수가 호출된다. 이제 아래에서 <code>foo</code> 함수가 어떻게 실행되는지 살펴보도록 하자.</p>
<hr>
<h2 id="foo-함수-코드-평가-및-실행"><a href="#foo-함수-코드-평가-및-실행" class="headerlink" title="foo 함수 코드 평가 및 실행"></a>foo 함수 코드 평가 및 실행</h2><blockquote>
<p><code>foo</code> 함수가 호출되면, <code>foo</code> 함수 실행 컨텍스트가 생성된다.<br>그리고 함수 렉시컬 환경이 구축된 뒤에 → 실행 컨텍스트 스택에 쌓인다.(push)</p>
</blockquote>
<h3 id="함수-렉시컬-환경-생성"><a href="#함수-렉시컬-환경-생성" class="headerlink" title="함수 렉시컬 환경 생성"></a>함수 렉시컬 환경 생성</h3><blockquote>
<p>함수 호출 뒤에 함수 실행 컨텍스트가 생성됐다.<br>이제 실행 컨텍스트 스택에 함수 실행 컨텍스트가 쌓이기 전, 함수 렉시컬 환경이 먼저 생성되어야 한다.</p>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/67448481/162585744-1aacea8a-d51f-4df8-a8c2-1ca4dbddebe0.png" alt="함수 환경 레코드에 등록되고 관리되는 정보들"></p>
<p>함수 렉시컬 환경 또한 “<strong>환경 레코드</strong>“와 <strong>“외부 렉시컬 환경에 대한 참조”</strong> 컴포넌트로 구성된다. 하지만 전역 환경 레코드와는 다르게 함수 환경 레코드는 이원화 되어 관리되지 않는다. 즉, “<strong>함수 환경 레코드</strong>”라는 하나의 컴포넌트에서 <strong>함수의 매개변수, arguments 객체, 지역변수, 내부함수(중첩함수)를 등록 및 관리</strong>한다.</p>
<h3 id="this-바인딩-1"><a href="#this-바인딩-1" class="headerlink" title="this 바인딩"></a>this 바인딩</h3><blockquote>
<p>전역 환경 레코드와는 다르게, 함수 환경 레코드에는 <strong>[[ThisValue]]</strong> 내부 슬롯이 존재한다.</p>
</blockquote>
<p>하지만 이전 포스팅에서 다뤘듯, 함수에서의 <code>this</code>값은 어떻게 호출했느냐에 따라 달라진다. <code>foo</code> 함수는 일반 함수로써 전역에서 호출됐기에 전역 객체가 바인딩 된다.</p>
<h3 id="외부-렉시컬-환경에-대한-참조"><a href="#외부-렉시컬-환경에-대한-참조" class="headerlink" title="외부 렉시컬 환경에 대한 참조"></a>외부 렉시컬 환경에 대한 참조</h3><blockquote>
<p><code>foo</code> 함수는 전역에서 선언된 전역 함수다. 따라서 foo 함수의 평가 자체는 전역 코드의 평가 과정에서 이루어진다. 이러한 이유로써 <code>foo</code> 함수는 전역 렉시컬 환경을 참조하며 이와 연결된다.</p>
</blockquote>
<p>추가적으로, 이전 포스팅에서 렉시컬 스코프는 “함수가 선언된 위치”에 따라 상위 스코프가 결정된다고 설명했었다. 이는 자바스크립트 엔진이 함수 선언 코드(전역 코드)를 평가하는 과정에서 함수 객체를 생성할 때 <strong>[[Environment]]</strong> <strong>내부 슬롯에 상위 스코프를 저장하기 때문</strong>이다. 이 부분에 대해서는 이후에 다룰 클로저 포스팅에서 자세하게 다룰 예정이니, 함수 객체에 <strong>[[Environment]]</strong> 내부 슬롯이 존재하고, 이 내부 슬롯에 상위 스코프가 저장된다는 것만 가볍게 기억하고 넘어가면 된다.</p>
<h3 id="foo-함수의-실행"><a href="#foo-함수의-실행" class="headerlink" title="foo 함수의 실행"></a>foo 함수의 실행</h3><blockquote>
<p>이제 <code>foo</code> 함수의 렉시컬 환경이 구성되며 코드 평가가 끝났다.</p>
</blockquote>
<p>아래의 그림과 같이 식별자 검색 이후 → <code>foo</code> 함수의 렉시컬 환경에서 모든 식별자들을 찾아 할당해준다.</p>
<p><img src="https://user-images.githubusercontent.com/67448481/162585745-f942e9f2-7713-46fd-b7f5-ca3b47c6499e.png"></p>
<hr>
<h2 id="bar-함수-코드-평가-및-실행"><a href="#bar-함수-코드-평가-및-실행" class="headerlink" title="bar 함수 코드 평가 및 실행"></a>bar 함수 코드 평가 및 실행</h2><blockquote>
<p>평가 및 실행의 과정이 <code>foo</code> 함수와 거의 비슷하기에 이 부분은 간략하게 중점만 설명하도록 하겠다.</p>
</blockquote>
<h3 id="bar-함수의-렉시컬-환경-생성"><a href="#bar-함수의-렉시컬-환경-생성" class="headerlink" title="bar 함수의 렉시컬 환경 생성"></a>bar 함수의 렉시컬 환경 생성</h3><p>렉시컬 환경을 생성하며 코드 평가가 이루어진다. 먼저 함수 환경 레코드에 <code>num2</code> 매개변수와 <code>c</code> 식별자, 그리고 arguments 객체가 등록된다. 물론 여기서도 <code>c</code>는 <code>const</code>에 의해 정의되었기 때문에 절대 <code>undefined</code>로 바로 초기화 되지 않는다.</p>
<p>이후 bar 함수가 내부함수기 때문에 <strong>[[ThisValue]]</strong> 는 또 다시 전역 객체를 바인딩 한다. 그리고 외부 렉시컬 환경에 대한 참조는 자신의 상위 함수인 <code>foo</code> 렉시컬 환경을 참조하게 된다.</p>
<h3 id="bar-함수-코드의-실행"><a href="#bar-함수-코드의-실행" class="headerlink" title="bar 함수 코드의 실행"></a>bar 함수 코드의 실행</h3><blockquote>
<p>마지막으로 <code>bar</code> 함수 코드가 실행된다.</p>
</blockquote>
<p><code>num2</code>에는 10이, <code>c</code>에는 5가 할당된다. 그리고 <code>console.log()</code>가 호출된다.</p>
<p><code>console.log()</code>의 실행 과정은 이전의 체이닝 과정과 거의 유사하다. console 식별자를 현재 실행중인 실행 컨텍스트의 스코프 체인 내에서 우선적으로 검색하고 → 외부 렉시컬 환경을 타고 가다가 결국 전역 객체에서 이를 찾는다. → 검색된 console 객체 안에서 또 log라는 내부 메소드를 찾아서 실행한다.</p>
<p>그리고 최종적으로 표현식의 각 값들(a + b + c + num + num2)을 식별자 검색을 통해 검색한다. 이 또한 외부 렉시컬 환경에 대한 참조를 통해 검색하는 것이다. 그렇게 각 값들을 찾은 뒤 console.log() 메소드에 전달하여 실행시킨다. 그렇게 <code>bar</code> 함수의 모든 코드들은 실행이 완료된다.</p>
<hr>
<h2 id="순차적-코드-실행-종료-pop"><a href="#순차적-코드-실행-종료-pop" class="headerlink" title="순차적 코드 실행 종료(pop)"></a>순차적 코드 실행 종료(pop)</h2><blockquote>
<p>이제 bar → foo → 전역 실행 컨텍스트 순으로 stack에서 차례대로 제거된다.</p>
</blockquote>
<p>하지만 여기서 유의해야 할 점이 있는데, 실행 컨텍스트가 pop되어 소멸된다고 하더라도, 렉시컬 환경 또한 함께 소멸되는 것은 아니라는 것이다. 렉시컬 환경은 실행 컨텍스트에 바인딩 된 구성요소이긴 하지만, 결국 하나의 독립적인 객체다. 따라서 자신을 참조하고 있는 데이터가 사라질 때 비로소 가비지 컬렉터에 의해 제거된다. (즉, 실행컨텍스트가 소멸되어도, 자신이 피참조되고 있을 경우에는 삭제되지 않는다는 것이다.)</p>
<hr>
<h2 id="정리-및-요약"><a href="#정리-및-요약" class="headerlink" title="정리 및 요약"></a>정리 및 요약</h2><blockquote>
<p>실행 컨텍스트는 자바스크립트에서 코드들이 실행되기 위해 필요한 환경이자 객체다.</p>
</blockquote>
<ol>
<li>실행 가능한 코드들(전역 코드, 함수 코드, 모듈 코드 등)은 각각 실행 컨텍스트를 생성한다. (ES6 이후부터는 블록문도 독립적인 실행 컨텍스트를 생성함)</li>
<li>전역 실행 컨텍스트가 먼저 생성되고 이후의 실행 가능한 코드들의 실행 컨텍스트가 차례대로 생성 및 실행된다.</li>
<li>순서는 실행 컨텍스트의 생성 → 렉시컬 환경 생성(코드의 평가) → 코드의 실행 순이다.</li>
<li>렉시컬 환경의 구성요소는 “환경 레코드”, “외부 렉시컬 환경에 대한 참조” 컴포넌트다.</li>
<li>전역 환경 레코드의 경우 객체 환경 레코드와 선언적 환경 레코드(let, const)로 이원화 되어 관리된다.</li>
<li>환경 레코드를 통해 식별자와 this값 등이 등록되고 관리된다.</li>
<li>환경 레코드의 구성이 끝나면 “외부 렉시컬 환경에 대한 참조”를 통해 외부(상위) 렉시컬 환경과 연결된다.</li>
<li>코드의 평가가 끝나면 코드가 실행되며 식별자 검색을 통한 값 할당 및 함수 호출 등이 이루어진다.</li>
</ol>
<hr>
<h2 id="참조한-자료"><a href="#참조한-자료" class="headerlink" title="참조한 자료"></a>참조한 자료</h2><p>도서 : 모던 자바스크립트 Deep Dive .이웅모</p>
<p><a target="_blank" rel="noopener" href="https://blog.bitsrc.io/understanding-execution-context-and-execution-stack-in-javascript-1c9ea8642dd0">Understanding Execution Context and Execution Stack in Javascript</a></p>
<p><a target="_blank" rel="noopener" href="https://www.javascripttutorial.net/javascript-execution-context/">Understanding JavaScript Execution Context By Examples</a></p>
<hr>
</div><div class="article-licensing box"><div class="licensing-title"><p>실행 컨텍스트 (Excution Context)</p><p><a href="https://hoonjoo-park.github.io/javascript/base/ExcutionContext/">https://hoonjoo-park.github.io/javascript/base/ExcutionContext/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Hoonjoo</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2022-04-10</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2022-04-12</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%EA%B0%9C%EB%85%90/">개념</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=61ccb08ffa9c81001d245598&amp;product=sticky-share-buttons" defer></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/algorithm/leet/assignCookies/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">LeetCode - Assign Cookies (Javascript)</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/algorithm/leet/longestPalindrome/"><span class="level-item">LeetCode - Longest Palindrome (Javascript)</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><script src="https://utteranc.es/client.js" repo="hoonjoo-park/hoonjoo-park.github.io" issue-term="pathname" label="🙋‍♂️" theme="github-light" crossorigin="anonymous" async></script></div></div></div><div class="column column-left is-3-tablet is-3-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#실행-컨텍스트란"><span class="level-left"><span class="level-item">1</span><span class="level-item">실행 컨텍스트란?</span></span></a></li><li><a class="level is-mobile" href="#실행-가능한-코드"><span class="level-left"><span class="level-item">2</span><span class="level-item">실행 가능한 코드</span></span></a></li><li><a class="level is-mobile" href="#실행-컨텍스트의-개괄적-형태와-동작-방식"><span class="level-left"><span class="level-item">3</span><span class="level-item">실행 컨텍스트의 개괄적 형태와 동작 방식</span></span></a></li><li><a class="level is-mobile" href="#코드의-평가-amp-실행"><span class="level-left"><span class="level-item">4</span><span class="level-item">코드의 평가 &amp; 실행</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#코드-평가"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">코드 평가</span></span></a></li><li><a class="level is-mobile" href="#코드-실행"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">코드 실행</span></span></a></li></ul></li><li><a class="level is-mobile" href="#중간-정리"><span class="level-left"><span class="level-item">5</span><span class="level-item">중간 정리</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#전역-코드의-평가-→-실행"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">전역 코드의 평가 → 실행</span></span></a></li><li><a class="level is-mobile" href="#함수-코드의-평가-→-실행"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">함수 코드의 평가 → 실행</span></span></a></li></ul></li><li><a class="level is-mobile" href="#렉시컬-환경"><span class="level-left"><span class="level-item">6</span><span class="level-item">렉시컬 환경</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#렉시컬-환경의-구성요소"><span class="level-left"><span class="level-item">6.1</span><span class="level-item">렉시컬 환경의 구성요소</span></span></a></li></ul></li><li><a class="level is-mobile" href="#실행-컨텍스트의-동작-과정-Feat-렉시컬-환경"><span class="level-left"><span class="level-item">7</span><span class="level-item">실행 컨텍스트의 동작 과정 (Feat. 렉시컬 환경)</span></span></a></li><li><a class="level is-mobile" href="#전역-객체-생성-→-전역-코드-평가-및-실행"><span class="level-left"><span class="level-item">8</span><span class="level-item">전역 객체 생성 → 전역 코드 평가 및 실행</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#전역-객체를-생성"><span class="level-left"><span class="level-item">8.1</span><span class="level-item">전역 객체를 생성</span></span></a></li><li><a class="level is-mobile" href="#전역-실행-컨텍스트의-생성"><span class="level-left"><span class="level-item">8.2</span><span class="level-item">전역 실행 컨텍스트의 생성</span></span></a></li><li><a class="level is-mobile" href="#전역-렉시컬-환경을-생성"><span class="level-left"><span class="level-item">8.3</span><span class="level-item">전역 렉시컬 환경을 생성</span></span></a></li><li><a class="level is-mobile" href="#객체-환경-레코드-생성"><span class="level-left"><span class="level-item">8.4</span><span class="level-item">객체 환경 레코드 생성</span></span></a></li><li><a class="level is-mobile" href="#선언적-환경-레코드-생성"><span class="level-left"><span class="level-item">8.5</span><span class="level-item">선언적 환경 레코드 생성</span></span></a></li><li><a class="level is-mobile" href="#this-바인딩"><span class="level-left"><span class="level-item">8.6</span><span class="level-item">this 바인딩</span></span></a></li><li><a class="level is-mobile" href="#외부-렉시컬-환경에-대한-참조-결정"><span class="level-left"><span class="level-item">8.7</span><span class="level-item">외부 렉시컬 환경에 대한 참조 결정</span></span></a></li><li><a class="level is-mobile" href="#코드-실행-1"><span class="level-left"><span class="level-item">8.8</span><span class="level-item">코드 실행</span></span></a></li></ul></li><li><a class="level is-mobile" href="#foo-함수-코드-평가-및-실행"><span class="level-left"><span class="level-item">9</span><span class="level-item">foo 함수 코드 평가 및 실행</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#함수-렉시컬-환경-생성"><span class="level-left"><span class="level-item">9.1</span><span class="level-item">함수 렉시컬 환경 생성</span></span></a></li><li><a class="level is-mobile" href="#this-바인딩-1"><span class="level-left"><span class="level-item">9.2</span><span class="level-item">this 바인딩</span></span></a></li><li><a class="level is-mobile" href="#외부-렉시컬-환경에-대한-참조"><span class="level-left"><span class="level-item">9.3</span><span class="level-item">외부 렉시컬 환경에 대한 참조</span></span></a></li><li><a class="level is-mobile" href="#foo-함수의-실행"><span class="level-left"><span class="level-item">9.4</span><span class="level-item">foo 함수의 실행</span></span></a></li></ul></li><li><a class="level is-mobile" href="#bar-함수-코드-평가-및-실행"><span class="level-left"><span class="level-item">10</span><span class="level-item">bar 함수 코드 평가 및 실행</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#bar-함수의-렉시컬-환경-생성"><span class="level-left"><span class="level-item">10.1</span><span class="level-item">bar 함수의 렉시컬 환경 생성</span></span></a></li><li><a class="level is-mobile" href="#bar-함수-코드의-실행"><span class="level-left"><span class="level-item">10.2</span><span class="level-item">bar 함수 코드의 실행</span></span></a></li></ul></li><li><a class="level is-mobile" href="#순차적-코드-실행-종료-pop"><span class="level-left"><span class="level-item">11</span><span class="level-item">순차적 코드 실행 종료(pop)</span></span></a></li><li><a class="level is-mobile" href="#정리-및-요약"><span class="level-left"><span class="level-item">12</span><span class="level-item">정리 및 요약</span></span></a></li><li><a class="level is-mobile" href="#참조한-자료"><span class="level-left"><span class="level-item">13</span><span class="level-item">참조한 자료</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="Hoon&#039;s 블로그" height="28"></a><p class="is-size-7"><span>&copy; 2022 Hoonjoo</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">총 방문자 <span id="busuanzi_value_site_uv"></span> 명</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/hoonjoo-park"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>